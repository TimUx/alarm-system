# =============================================================================
# Alarm System - Central Configuration
# =============================================================================
# This file contains all configuration for the integrated alarm system:
# - alarm-mail: IMAP email parser
# - alarm-monitor: Dashboard for displaying alarms
# - alarm-messenger: Mobile push notification system
#
# Copy this file to .env and customize the values for your installation.
# =============================================================================

# =============================================================================
# GENERAL CONFIGURATION
# =============================================================================

# Timezone for all services
TZ=Europe/Berlin

# =============================================================================
# ALARM MAIL SERVICE CONFIGURATION
# =============================================================================
# The alarm-mail service polls an IMAP mailbox for alarm emails and forwards
# them to alarm-monitor and alarm-messenger.

# IMAP Configuration (Required)
ALARM_MAIL_IMAP_HOST=imap.example.com
ALARM_MAIL_IMAP_PORT=993
ALARM_MAIL_IMAP_USE_SSL=true
ALARM_MAIL_IMAP_USERNAME=alarm@example.com
ALARM_MAIL_IMAP_PASSWORD=change-me
ALARM_MAIL_IMAP_MAILBOX=INBOX
ALARM_MAIL_IMAP_SEARCH=UNSEEN
ALARM_MAIL_POLL_INTERVAL=60

# =============================================================================
# ALARM MONITOR CONFIGURATION
# =============================================================================
# The alarm-monitor displays alarms on a dashboard.

# Port for accessing the dashboard (external)
ALARM_MONITOR_PORT=8000

# API Key for receiving alarms from alarm-mail service
# Generate with: openssl rand -hex 32
ALARM_MONITOR_API_KEY=change-me-to-random-api-key-for-monitor

# How long to display an alarm before returning to idle view (in minutes)
ALARM_MONITOR_DISPLAY_DURATION=30

# =============================================================================
# ALARM MESSENGER CONFIGURATION
# =============================================================================
# The alarm-messenger sends push notifications to mobile devices via WebSocket.

# Port for accessing the admin interface and WebSocket (external)
ALARM_MESSENGER_PORT=3000

# Server URL for QR code generation (must be externally accessible)
# Examples:
#   Development: http://localhost:3000
#   Production:  https://messenger.your-domain.com
ALARM_MESSENGER_SERVER_URL=http://localhost:3000

# API Secret Key for receiving alarms from alarm-mail service
# Generate with: openssl rand -hex 32
# Can be Base64 encoded for additional obfuscation (optional)
ALARM_MESSENGER_API_SECRET_KEY=change-me-to-random-api-key-for-messenger

# JWT Secret for admin interface authentication
# Generate with: openssl rand -hex 32
# Can be Base64 encoded for additional obfuscation (optional)
ALARM_MESSENGER_JWT_SECRET=change-me-to-random-jwt-secret

# CORS Origins (comma-separated allowed origins, or * for all)
# For production, specify your mobile app domain
ALARM_MESSENGER_CORS_ORIGINS=*

# =============================================================================
# OPTIONAL: REVERSE PROXY CONFIGURATION (CADDY)
# =============================================================================
# If using the optional Caddy reverse proxy for SSL/TLS termination,
# configure the domain names here.
# Enable Caddy with: docker-compose --profile with-caddy up

# Domain for alarm-monitor dashboard
ALARM_MONITOR_DOMAIN=monitor.example.com

# Domain for alarm-messenger (admin interface and WebSocket)
ALARM_MESSENGER_DOMAIN=messenger.example.com

# =============================================================================
# NOTES
# =============================================================================
# 1. All services communicate internally via the 'alarm-network' Docker network
# 2. Only alarm-monitor and alarm-messenger need external port access
# 3. alarm-mail has no external ports - it only needs outgoing IMAP access
# 4. API keys must match between services:
#    - ALARM_MONITOR_API_KEY must be the same for alarm-mail and alarm-monitor
#    - ALARM_MESSENGER_API_SECRET_KEY must be the same for alarm-mail and alarm-messenger
# 5. Generate strong random API keys before deployment!
# 6. For production use, enable Caddy for automatic HTTPS
